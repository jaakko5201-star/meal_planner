--bg: #8de3a8; globa.css
sql file 1: -- Create budgets table
CREATE TABLE budgets (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id UUID REFERENCES auth.users NOT NULL,
  amount DECIMAL(10,2) NOT NULL,
  start_date DATE NOT NULL DEFAULT CURRENT_DATE,
  end_date DATE NOT NULL DEFAULT CURRENT_DATE + INTERVAL '7 days',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- Create meals table
CREATE TABLE meals (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id UUID REFERENCES auth.users NOT NULL,
  name TEXT NOT NULL,
  estimated_cost DECIMAL(10,2),
  ingredients JSO
  
  NB DEFAULT '[]',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- Create planned_meals table
CREATE TABLE planned_meals (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id UUID REFERENCES auth.users NOT NULL,
  meal_id BIGINT REFERENCES meals(id) ON DELETE CASCADE,
  date DATE NOT NULL,
  meal_type TEXT CHECK (meal_type IN ('breakfast', 'lunch', 'dinner', 'snack')),
  servings_used INTEGER DEFAULT 1,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- Enable security
ALTER TABLE budgets ENABLE ROW LEVEL SECURITY;
ALTER TABLE meals ENABLE ROW LEVEL SECURITY;
ALTER TABLE planned_meals ENABLE ROW LEVEL SECURITY;

-- Create security policies
CREATE POLICY "Users can manage own budgets" 
  ON budgets FOR ALL 
  USING (auth.uid() = user_id);

CREATE POLICY "Users can manage own meals" 
  ON meals FOR ALL 
  USING (auth.uid() = user_id);

CREATE POLICY "Users can manage own planned meals" 
  ON planned_meals FOR ALL 
  USING (auth.uid() = user_id);